/**
 * jQuery Roundabout - v2.4.2
 * http://fredhq.com/projects/roundabout
 *
 * Moves list-items of enabled ordered and unordered lists long
 * a chosen path. Includes the default "lazySusan" path, that
 * moves items long a spinning turntable.
 *
 * Terms of Use // jQuery Roundabout
 *
 * Open source under the BSD license
 *
 * Copyright (c) 2011-2012, Fred LeBlanc
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 *   - Redistributions of source code must retain the above copyright
 *     notice, this list of conditions and the following disclaimer.
 *   - Redistributions in binary form must reproduce the above
 *     copyright notice, this list of conditions and the following
 *     disclaimer in the documentation and/or other materials provided
 *     with the distribution.
 *   - Neither the name of the author nor the names of its contributors
 *     may be used to endorse or promote products derived from this
 *     software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */
(function(e){"use strict";var t,n,r;e.extend({roundaboutShapes:{def:"lazySusan",lazySusan:function(e,t,n){return{x:Math.sin(e+t),y:Math.sin(e+3*Math.PI/2+t)/8*n,z:(Math.cos(e+t)+1)/2,scale:Math.sin(e+Math.PI/2+t)/2+.5}}}}),t={bearing:0,tilt:0,minZ:100,maxZ:280,minOpacity:.4,maxOpacity:1,minScale:.4,maxScale:1,duration:600,btnNext:null,btnNextCallback:function(){},btnPrev:null,btnPrevCallback:function(){},btnToggleAutoplay:null,btnStartAutoplay:null,btnStopAutoplay:null,easing:"swing",clickToFocus:!0,clickToFocusCallback:function(){},focusBearing:0,shape:"lazySusan",debug:!1,childSelector:"li",startingChild:null,reflect:!1,floatComparisonThreshold:.001,autoplay:!1,autoplayDuration:1e3,autoplayPauseOnHover:!1,autoplayCallback:function(){},autoplayInitialDelay:0,enableDrag:!1,dropDuration:600,dropEasing:"swing",dropAnimateTo:"nearest",dropCallback:function(){},dragAxis:"x",dragFactor:4,triggerFocusEvents:!0,triggerBlurEvents:!0,responsive:!1},n={autoplayInterval:null,autoplayIsRunning:!1,autoplayStartTimeout:null,animating:!1,childInFocus:-1,touchMoveStartPosition:null,stopAnimation:!1,lastAnimationStep:!1},r={init:function(i,s,o){var u,a=(new Date).getTime();return i=typeof i=="object"?i:{},s=e.isFunction(s)?s:function(){},s=e.isFunction(i)?i:s,u=e.extend({},t,i,n),this.each(function(){var t=e(this),n=t.children(u.childSelector).length,i=360/n,a=u.startingChild&&u.startingChild>n-1?n-1:u.startingChild,f=u.startingChild===null?u.bearing:360-a*i,l=t.css("position")!=="static"?t.css("position"):"relative";t.css({padding:0,position:l}).addClass("roundabout-holder").data("roundabout",e.extend({},u,{startingChild:a,bearing:f,oppositeOfFocusBearing:r.normalize.apply(null,[u.focusBearing-180]),dragBearing:f,period:i})),o?t.unbind(".roundabout").children(u.childSelector).unbind(".roundabout"):u.responsive&&e(window).bind("resize",function(){r.stopAutoplay.apply(t),r.relayoutChildren.apply(t)}),u.clickToFocus&&t.children(u.childSelector).each(function(n){e(this).bind("click.roundabout",function(){var i=r.getPlacement.apply(t,[n]);if(!r.isInFocus.apply(t,[i]))return r.stopAnimation.apply(e(this)),t.data("roundabout").animating||r.animateBearingToFocus.apply(t,[i,t.data("roundabout").clickToFocusCallback]),!1})}),u.btnNext&&e(u.btnNext).bind("click.roundabout",function(){return t.data("roundabout").animating||r.animateToNextChild.apply(t,[t.data("roundabout").btnNextCallback]),!1}),u.btnPrev&&e(u.btnPrev).bind("click.roundabout",function(){return r.animateToPreviousChild.apply(t,[t.data("roundabout").btnPrevCallback]),!1}),u.btnToggleAutoplay&&e(u.btnToggleAutoplay).bind("click.roundabout",function(){return r.toggleAutoplay.apply(t),!1}),u.btnStartAutoplay&&e(u.btnStartAutoplay).bind("click.roundabout",function(){return r.startAutoplay.apply(t),!1}),u.btnStopAutoplay&&e(u.btnStopAutoplay).bind("click.roundabout",function(){return r.stopAutoplay.apply(t),!1}),u.autoplayPauseOnHover&&t.bind("mouseenter.roundabout.autoplay",function(){r.stopAutoplay.apply(t,[!0])}).bind("mouseleave.roundabout.autoplay",function(){r.startAutoplay.apply(t)}),u.enableDrag&&(e.isFunction(t.drag)?e.isFunction(t.drop)?t.drag(function(e,n){var i=t.data("roundabout"),s=i.dragAxis.toLowerCase()==="x"?"deltaX":"deltaY";r.stopAnimation.apply(t),r.setBearing.apply(t,[i.dragBearing+n[s]/i.dragFactor])}).drop(function(e){var n=t.data("roundabout"),i=r.getAnimateToMethod(n.dropAnimateTo);r.allowAnimation.apply(t),r[i].apply(t,[n.dropDuration,n.dropEasing,n.dropCallback]),n.dragBearing=n.period*r.getNearestChild.apply(t)}):u.debug&&alert("You do not have the drop plugin loaded."):u.debug&&alert("You do not have the drag plugin loaded."),t.each(function(){var t=e(this).get(0),n=e(this).data("roundabout"),i=n.dragAxis.toLowerCase()==="x"?"pageX":"pageY",s=r.getAnimateToMethod(n.dropAnimateTo);t.addEventListener&&(t.addEventListener("touchstart",function(e){n.touchMoveStartPosition=e.touches[0][i]},!1),t.addEventListener("touchmove",function(t){var s=(t.touches[0][i]-n.touchMoveStartPosition)/n.dragFactor;t.preventDefault(),r.stopAnimation.apply(e(this)),r.setBearing.apply(e(this),[n.dragBearing+s])},!1),t.addEventListener("touchend",function(t){t.preventDefault(),r.allowAnimation.apply(e(this)),s=r.getAnimateToMethod(n.dropAnimateTo),r[s].apply(e(this),[n.dropDuration,n.dropEasing,n.dropCallback]),n.dragBearing=n.period*r.getNearestChild.apply(e(this))},!1))})),r.initChildren.apply(t,[s,o])})},initChildren:function(t,n){var i=e(this),s=i.data("roundabout");return t=t||function(){},i.children(s.childSelector).each(function(t){var s,o,u,a=r.getPlacement.apply(i,[t]);n&&e(this).data("roundabout")&&(s=e(this).data("roundabout").startWidth,o=e(this).data("roundabout").startHeight,u=e(this).data("roundabout").startFontSize),e(this).addClass("roundabout-moveable-item").css("position","absolute"),e(this).data("roundabout",{startWidth:s||e(this).width(),startHeight:o||e(this).height(),startFontSize:u||parseInt(e(this).css("font-size"),10),degrees:a,backDegrees:r.normalize.apply(null,[a-180]),childNumber:t,currentScale:1,parent:i})}),r.updateChildren.apply(i),s.autoplay&&(s.autoplayStartTimeout=setTimeout(function(){r.startAutoplay.apply(i)},s.autoplayInitialDelay)),i.trigger("ready"),t.apply(i),i},updateChildren:function(){return this.each(function(){var t=e(this),n=t.data("roundabout"),i=-1,s={bearing:n.bearing,tilt:n.tilt,stage:{width:Math.floor(e(this).width()*.9),height:Math.floor(e(this).height()*.9)},animating:n.animating,inFocus:n.childInFocus,focusBearingRadian:r.degToRad.apply(null,[n.focusBearing]),shape:e.roundaboutShapes[n.shape]||e.roundaboutShapes[e.roundaboutShapes.def]};s.midStage={width:s.stage.width/2,height:s.stage.height/2},s.nudge={width:s.midStage.width+s.stage.width*.05,height:s.midStage.height+s.stage.height*.05},s.zValues={min:n.minZ,max:n.maxZ,diff:n.maxZ-n.minZ},s.opacity={min:n.minOpacity,max:n.maxOpacity,diff:n.maxOpacity-n.minOpacity},s.scale={min:n.minScale,max:n.maxScale,diff:n.maxScale-n.minScale},t.children(n.childSelector).each(function(o){r.updateChild.apply(t,[e(this),s,o,function(){e(this).trigger("ready")}])&&(!s.animating||n.lastAnimationStep)?(i=o,e(this).addClass("roundabout-in-focus")):e(this).removeClass("roundabout-in-focus")}),i!==s.inFocus&&(n.triggerBlurEvents&&t.children(n.childSelector).eq(s.inFocus).trigger("blur"),n.childInFocus=i,n.triggerFocusEvents&&i!==-1&&t.children(n.childSelector).eq(i).trigger("focus")),t.trigger("childrenUpdated")})},updateChild:function(t,n,i,s){var o,u=this,a=e(t),f=a.data("roundabout"),l=[],c=r.degToRad.apply(null,[360-f.degrees+n.bearing]);return s=s||function(){},c=r.normalizeRad.apply(null,[c]),o=n.shape(c,n.focusBearingRadian,n.tilt),o.scale=o.scale>1?1:o.scale,o.adjustedScale=(n.scale.min+n.scale.diff*o.scale).toFixed(4),o.width=(o.adjustedScale*f.startWidth).toFixed(4),o.height=(o.adjustedScale*f.startHeight).toFixed(4),a.css({left:(o.x*n.midStage.width+n.nudge.width-o.width/2).toFixed(0)+"px",top:(o.y*n.midStage.height+n.nudge.height-o.height/2).toFixed(0)+"px",width:o.width+"px",height:o.height+"px",opacity:(n.opacity.min+n.opacity.diff*o.scale).toFixed(2),zIndex:Math.round(n.zValues.min+n.zValues.diff*o.z),fontSize:(o.adjustedScale*f.startFontSize).toFixed(1)+"px"}),f.currentScale=o.adjustedScale,u.data("roundabout").debug&&(l.push('<div style="font-weight: normal; font-size: 10px; padding: 2px; width: '+a.css("width")+'; background-color: #ffc;">'),l.push('<strong style="font-size: 12px; white-space: nowrap;">Child '+i+"</strong><br />"),l.push("<strong>left:</strong> "+a.css("left")+"<br />"),l.push("<strong>top:</strong> "+a.css("top")+"<br />"),l.push("<strong>width:</strong> "+a.css("width")+"<br />"),l.push("<strong>opacity:</strong> "+a.css("opacity")+"<br />"),l.push("<strong>height:</strong> "+a.css("height")+"<br />"),l.push("<strong>z-index:</strong> "+a.css("z-index")+"<br />"),l.push("<strong>font-size:</strong> "+a.css("font-size")+"<br />"),l.push("<strong>scale:</strong> "+a.data("roundabout").currentScale),l.push("</div>"),a.html(l.join(""))),a.trigger("reposition"),s.apply(u),r.isInFocus.apply(u,[f.degrees])},setBearing:function(t,n){return n=n||function(){},t=r.normalize.apply(null,[t]),this.each(function(){var n,i,s,o=e(this),u=o.data("roundabout"),a=u.bearing;u.bearing=t,o.trigger("bearingSet"),r.updateChildren.apply(o),n=Math.abs(a-t);if(!u.animating||n>180)return;n=Math.abs(a-t),o.children(u.childSelector).each(function(n){var i;r.isChildBackDegreesBetween.apply(e(this),[t,a])&&(i=a>t?"Clockwise":"Counterclockwise",e(this).trigger("move"+i+"ThroughBack"))})}),n.apply(this),this},adjustBearing:function(t,n){return n=n||function(){},t===0?this:(this.each(function(){r.setBearing.apply(e(this),[e(this).data("roundabout").bearing+t])}),n.apply(this),this)},setTilt:function(t,n){return n=n||function(){},this.each(function(){e(this).data("roundabout").tilt=t,r.updateChildren.apply(e(this))}),n.apply(this),this},adjustTilt:function(t,n){return n=n||function(){},this.each(function(){r.setTilt.apply(e(this),[e(this).data("roundabout").tilt+t])}),n.apply(this),this},animateToBearing:function(t,n,i,s,o){var u=(new Date).getTime();return o=o||function(){},e.isFunction(s)?(o=s,s=null):e.isFunction(i)?(o=i,i=null):e.isFunction(n)&&(o=n,n=null),this.each(function(){var a,f,l,c=e(this),h=c.data("roundabout"),p=n?n:h.duration,d=i?i:h.easing||"swing";s||(s={timerStart:u,start:h.bearing,totalTime:p}),a=u-s.timerStart;if(h.stopAnimation){r.allowAnimation.apply(c),h.animating=!1;return}a<p?(h.animating||c.trigger("animationStart"),h.animating=!0,typeof e.easing.def=="string"?(f=e.easing[d]||e.easing[e.easing.def],l=f(null,a,s.start,t-s.start,s.totalTime)):l=e.easing[d](a/s.totalTime,a,s.start,t-s.start,s.totalTime),r.compareVersions.apply(null,[e().jquery,"1.7.2"])>=0&&!e.easing.easeOutBack&&(l=s.start+(t-s.start)*l),l=r.normalize.apply(null,[l]),h.dragBearing=l,r.setBearing.apply(c,[l,function(){setTimeout(function(){r.animateToBearing.apply(c,[t,p,d,s,o])},0)}])):(h.lastAnimationStep=!0,t=r.normalize.apply(null,[t]),r.setBearing.apply(c,[t,function(){c.trigger("animationEnd")}]),h.animating=!1,h.lastAnimationStep=!1,h.dragBearing=t,o.apply(c))}),this},animateToNearbyChild:function(t,n){var i=t[0],s=t[1],o=t[2]||function(){};return e.isFunction(s)?(o=s,s=null):e.isFunction(i)&&(o=i,i=null),this.each(function(){var t,u,a=e(this),f=a.data("roundabout"),l=f.reflect?f.bearing:f.bearing%360,c=a.children(f.childSelector).length;if(!f.animating)if(f.reflect&&n==="previous"||!f.reflect&&n==="next"){l=Math.abs(l)<f.floatComparisonThreshold?360:l;for(t=0;t<c;t+=1){u={lower:f.period*t,upper:f.period*(t+1)},u.upper=t===c-1?360:u.upper;if(l<=Math.ceil(u.upper)&&l>=Math.floor(u.lower)){c===2&&l===360?r.animateToDelta.apply(a,[-180,i,s,o]):r.animateBearingToFocus.apply(a,[u.lower,i,s,o]);break}}}else{l=Math.abs(l)<f.floatComparisonThreshold||360-Math.abs(l)<f.floatComparisonThreshold?0:l;for(t=c-1;t>=0;t-=1){u={lower:f.period*t,upper:f.period*(t+1)},u.upper=t===c-1?360:u.upper;if(l>=Math.floor(u.lower)&&l<Math.ceil(u.upper)){c===2&&l===360?r.animateToDelta.apply(a,[180,i,s,o]):r.animateBearingToFocus.apply(a,[u.upper,i,s,o]);break}}}})},animateToNearestChild:function(t,n,i){return i=i||function(){},e.isFunction(n)?(i=n,n=null):e.isFunction(t)&&(i=t,t=null),this.each(function(){var s=r.getNearestChild.apply(e(this));r.animateToChild.apply(e(this),[s,t,n,i])})},animateToChild:function(t,n,i,s){return s=s||function(){},e.isFunction(i)?(s=i,i=null):e.isFunction(n)&&(s=n,n=null),this.each(function(){var o,u=e(this),a=u.data("roundabout");a.childInFocus!==t&&!a.animating&&(o=u.children(a.childSelector).eq(t),r.animateBearingToFocus.apply(u,[o.data("roundabout").degrees,n,i,s]))})},animateToNextChild:function(e,t,n){return r.animateToNearbyChild.apply(this,[arguments,"next"])},animateToPreviousChild:function(e,t,n){return r.animateToNearbyChild.apply(this,[arguments,"previous"])},animateToDelta:function(t,n,i,s){return s=s||function(){},e.isFunction(i)?(s=i,i=null):e.isFunction(n)&&(s=n,n=null),this.each(function(){var o=e(this).data("roundabout").bearing+t;r.animateToBearing.apply(e(this),[o,n,i,s])})},animateBearingToFocus:function(t,n,i,s){return s=s||function(){},e.isFunction(i)?(s=i,i=null):e.isFunction(n)&&(s=n,n=null),this.each(function(){var o=e(this).data("roundabout").bearing-t;o=Math.abs(360-o)<Math.abs(o)?360-o:-o,o=o>180?-(360-o):o,o!==0&&r.animateToDelta.apply(e(this),[o,n,i,s])})},stopAnimation:function(){return this.each(function(){e(this).data("roundabout").stopAnimation=!0})},allowAnimation:function(){return this.each(function(){e(this).data("roundabout").stopAnimation=!1})},startAutoplay:function(t){return this.each(function(){var n=e(this),i=n.data("roundabout");t=t||i.autoplayCallback||function(){},clearInterval(i.autoplayInterval),i.autoplayInterval=setInterval(function(){r.animateToNextChild.apply(n,[t])},i.autoplayDuration),i.autoplayIsRunning=!0,n.trigger("autoplayStart")})},stopAutoplay:function(t){return this.each(function(){clearInterval(e(this).data("roundabout").autoplayInterval),e(this).data("roundabout").autoplayInterval=null,e(this).data("roundabout").autoplayIsRunning=!1,t||e(this).unbind(".autoplay"),e(this).trigger("autoplayStop")})},toggleAutoplay:function(t){return this.each(function(){var n=e(this),i=n.data("roundabout");t=t||i.autoplayCallback||function(){},r.isAutoplaying.apply(e(this))?r.stopAutoplay.apply(e(this),[t]):r.startAutoplay.apply(e(this),[t])})},isAutoplaying:function(){return this.data("roundabout").autoplayIsRunning},changeAutoplayDuration:function(t){return this.each(function(){var n=e(this),i=n.data("roundabout");i.autoplayDuration=t,r.isAutoplaying.apply(n)&&(r.stopAutoplay.apply(n),setTimeout(function(){r.startAutoplay.apply(n)},10))})},normalize:function(e){var t=e%360;return t<0?360+t:t},normalizeRad:function(e){while(e<0)e+=Math.PI*2;while(e>Math.PI*2)e-=Math.PI*2;return e},isChildBackDegreesBetween:function(t,n){var r=e(this).data("roundabout").backDegrees;return t>n?r>=n&&r<t:r<n&&r>=t},getAnimateToMethod:function(e){return e=e.toLowerCase(),e==="next"?"animateToNextChild":e==="previous"?"animateToPreviousChild":"animateToNearestChild"},relayoutChildren:function(){return this.each(function(){var t=e(this),n=e.extend({},t.data("roundabout"));n.startingChild=t.data("roundabout").childInFocus,r.init.apply(t,[n,null,!0])})},getNearestChild:function(){var t=e(this),n=t.data("roundabout"),r=t.children(n.childSelector).length;return n.reflect?Math.round(n.bearing/n.period)%r:(r-Math.round(n.bearing/n.period)%r)%r},degToRad:function(e){return r.normalize.apply(null,[e])*Math.PI/180},getPlacement:function(e){var t=this.data("roundabout");return t.reflect?t.period*e:360-t.period*e},isInFocus:function(e){var t,n=this,i=n.data("roundabout"),s=r.normalize.apply(null,[i.bearing]);return e=r.normalize.apply(null,[e]),t=Math.abs(s-e),t<=i.floatComparisonThreshold||t>=360-i.floatComparisonThreshold},getChildInFocus:function(){var t=e(this).data("roundabout");return t.childInFocus>-1?t.childInFocus:!1},compareVersions:function(e,t){var n,r=e.split(/\./i),i=t.split(/\./i),s=r.length>i.length?r.length:i.length;for(n=0;n<=s;n++){if(r[n]&&!i[n]&&parseInt(r[n],10)!==0)return 1;if(i[n]&&!r[n]&&parseInt(i[n],10)!==0)return-1;if(r[n]===i[n])continue;if(r[n]&&i[n])return parseInt(r[n],10)>parseInt(i[n],10)?1:-1}return 0}},e.fn.roundabout=function(t){if(r[t])return r[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||e.isFunction(t)||!t)return r.init.apply(this,arguments);e.error("Method "+t+" does not exist for jQuery.roundabout.")}})(jQuery);